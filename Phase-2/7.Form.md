# **Django Forms: Simple Beginner's Guide**

## **Part 1: Forms & POST Requests**

### **GET vs POST**
```
GET = Get data (view page)
- Data in URL: example.com/?search=python
- Can bookmark
- Limited data

POST = Send data (submit form)
- Data hidden
- Cannot bookmark
- No size limit
- Use for login, signup, forms
```

### **Basic Form in Template**
```html
<!-- contact.html -->
<form method="post">
    {% csrf_token %}  <!-- REQUIRED for POST -->
    
    <label>Name:</label>
    <input type="text" name="name">
    
    <label>Email:</label>
    <input type="email" name="email">
    
    <button type="submit">Send</button>
</form>
```

### **Handle Form in View**
```python
# views.py
from django.shortcuts import render

def contact_view(request):
    if request.method == 'POST':
        # Get form data
        name = request.POST.get('name')
        email = request.POST.get('email')
        
        # Save to database (later)
        print(f"Name: {name}, Email: {email}")
        
        return render(request, 'success.html')
    
    # GET request - show empty form
    return render(request, 'contact.html')
```

---

## **Part 2: Add Student Form**

### **Step 1: Create Student Model**
```python
# models.py
from django.db import models

class Student(models.Model):
    name = models.CharField(max_length=100)
    email = models.EmailField()
    age = models.IntegerField()
    course = models.CharField(max_length=100)
    
    def __str__(self):
        return self.name
```

### **Step 2: Create ModelForm**
```python
# forms.py
from django import forms
from .models import Student

class StudentForm(forms.ModelForm):
    class Meta:
        model = Student
        fields = ['name', 'email', 'age', 'course']  # Which fields to show
```

### **Step 3: Create Add View**
```python
# views.py
from django.shortcuts import render, redirect
from .forms import StudentForm
from .models import Student

def add_student(request):
    if request.method == 'POST':
        form = StudentForm(request.POST)
        
        if form.is_valid():
            form.save()  # Save to database
            return redirect('student_list')  # Go to list page
    
    else:
        form = StudentForm()  # Empty form
    
    return render(request, 'add_student.html', {'form': form})
```

### **Step 4: Simple Template**
```html
<!-- add_student.html -->
<h2>Add Student</h2>

<form method="post">
    {% csrf_token %}
    
    {{ form.as_p }}  <!-- Shows all fields as paragraphs -->
    
    <button type="submit">Add Student</button>
</form>
```

---

## **Part 3: Form Validation**

### **Automatic Validation**
```python
# forms.py - Django does this automatically:
# 1. Required fields checked
# 2. Email format checked
# 3. Max length checked
# 4. etc.
```

### **Manual Validation**
```python
def add_student(request):
    if request.method == 'POST':
        form = StudentForm(request.POST)
        
        if form.is_valid():  # ‚Üê VALIDATION HAPPENS HERE
            # Data is clean and safe
            student = form.save()
            return redirect('success')
        else:
            # Show errors
            print(form.errors)  # See errors in console
    
    # GET or invalid POST
    form = StudentForm()
    return render(request, 'form.html', {'form': form})
```

### **Show Errors in Template**
```html
<form method="post">
    {% csrf_token %}
    
    <!-- Field by field -->
    <div>
        <label>Name:</label>
        {{ form.name }}
        {% if form.name.errors %}
            <div class="error">{{ form.name.errors }}</div>
        {% endif %}
    </div>
    
    <!-- All errors at top -->
    {% if form.errors %}
        <div class="alert">
            Please fix errors below
        </div>
    {% endif %}
    
    <button type="submit">Save</button>
</form>
```

---

## **Part 4: Update & Delete Student**

### **Update Student**
```python
# views.py
from django.shortcuts import get_object_or_404

def update_student(request, student_id):
    # Get student from database
    student = get_object_or_404(Student, id=student_id)
    
    if request.method == 'POST':
        form = StudentForm(request.POST, instance=student)
        if form.is_valid():
            form.save()
            return redirect('student_list')
    
    else:
        form = StudentForm(instance=student)  # Pre-fill form
    
    return render(request, 'update_student.html', {'form': form})
```

### **Delete Student**
```python
def delete_student(request, student_id):
    student = get_object_or_404(Student, id=student_id)
    
    if request.method == 'POST':
        student.delete()
        return redirect('student_list')
    
    return render(request, 'confirm_delete.html', {'student': student})
```

### **Update Template**
```html
<!-- update_student.html -->
<h2>Edit Student</h2>

<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Update</button>
</form>
```

### **Delete Confirmation**
```html
<!-- confirm_delete.html -->
<h2>Delete Student</h2>
<p>Are you sure you want to delete {{ student.name }}?</p>

<form method="post">
    {% csrf_token %}
    <button type="submit">Yes, Delete</button>
    <a href="{% url 'student_list' %}">Cancel</a>
</form>
```

---

## **URL Configuration**
```python
# urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('add/', views.add_student, name='add_student'),
    path('update/<int:student_id>/', views.update_student, name='update_student'),
    path('delete/<int:student_id>/', views.delete_student, name='delete_student'),
    path('list/', views.student_list, name='student_list'),
]
```

---

## **Complete Example**

### **Student List View**
```python
def student_list(request):
    students = Student.objects.all()  # Get all students
    return render(request, 'student_list.html', {'students': students})
```

### **Student List Template**
```html
<!-- student_list.html -->
<h1>Students</h1>
<a href="{% url 'add_student' %}">Add New Student</a>

<ul>
{% for student in students %}
    <li>
        {{ student.name }} - {{ student.course }}
        <a href="{% url 'update_student' student.id %}">Edit</a>
        <a href="{% url 'delete_student' student.id %}">Delete</a>
    </li>
{% endfor %}
</ul>
```

---

## **Quick Cheat Sheet**

### **1. Create Form**
```python
# forms.py
from django import forms
from .models import YourModel

class YourForm(forms.ModelForm):
    class Meta:
        model = YourModel
        fields = ['field1', 'field2']
```

### **2. Handle in View**
```python
def your_view(request):
    if request.method == 'POST':
        form = YourForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('success')
    else:
        form = YourForm()
    
    return render(request, 'template.html', {'form': form})
```

### **3. In Template**
```html
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}  <!-- or {{ form.as_table }} or {{ form.as_ul }} -->
    <button type="submit">Submit</button>
</form>
```

### **4. Update Object**
```python
form = YourForm(request.POST, instance=object)
```

### **5. Delete Object**
```python
object.delete()
```

---

## **Common Errors & Fixes**

### **1. CSRF Token Missing**
```html
<!-- Add this to ALL POST forms -->
{% csrf_token %}
```

### **2. Form not saving**
```python
# Check if form is valid first
if form.is_valid():
    form.save()  # This saves to database
```

### **3. Object not found (404)**
```python
# Use get_object_or_404
from django.shortcuts import get_object_or_404
student = get_object_or_404(Student, id=student_id)
```

---

## **Practice Exercise**

Create a simple Todo app:
1. Form to add tasks (title, description)
2. List all tasks
3. Edit tasks
4. Delete tasks
5. Mark tasks as complete

Start with just #1 and #2, then add more!

---

**Remember:**
1. **GET** = View page
2. **POST** = Submit form
3. **{% csrf_token %}** = Always in POST forms
4. **form.is_valid()** = Check before save
5. **form.save()** = Save to database

